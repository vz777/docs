"use strict";(self.webpackChunkthelia=self.webpackChunkthelia||[]).push([[8588],{3905:(e,t,r)=>{r.d(t,{Zo:()=>d,kt:()=>m});var n=r(7294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var s=n.createContext({}),u=function(e){var t=n.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):o(o({},t),e)),r},d=function(e){var t=u(e.components);return n.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},c=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,l=e.originalType,s=e.parentName,d=i(e,["components","mdxType","originalType","parentName"]),c=u(r),m=a,v=c["".concat(s,".").concat(m)]||c[m]||p[m]||l;return r?n.createElement(v,o(o({ref:t},d),{},{components:r})):n.createElement(v,o({ref:t},d))}));function m(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var l=r.length,o=new Array(l);o[0]=c;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:a,o[1]=i;for(var u=2;u<l;u++)o[u]=r[u];return n.createElement.apply(null,o)}return n.createElement.apply(null,r)}c.displayName="MDXCreateElement"},9958:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>p,frontMatter:()=>l,metadata:()=>i,toc:()=>u});var n=r(7462),a=(r(7294),r(3905));const l={title:"Update",sidebar_position:14},o=void 0,i={unversionedId:"update",id:"update",title:"Update",description:"Mettre \xe0 jour les composants",source:"@site/docs/update.md",sourceDirName:".",slug:"/update",permalink:"/docs/docs/update",draft:!1,editUrl:"https://github.com/vz777/docs/edit/main/docs/update.md",tags:[],version:"current",sidebarPosition:14,frontMatter:{title:"Update",sidebar_position:14},sidebar:"myAutogeneratedSidebar",previous:{title:"Internationalization",permalink:"/docs/docs/Internationalization"},next:{title:"Contribute",permalink:"/docs/docs/contribute"}},s={},u=[{value:"Mettre \xe0 jour les composants",id:"mettre-\xe0-jour-les-composants",level:2},{value:"Mettre \xe0 jour la base de donn\xe9es",id:"mettre-\xe0-jour-la-base-de-donn\xe9es",level:2},{value:"Migrer de Thelia &lt; 2.4 to 2.5",id:"migrer-de-thelia--24-to-25",level:2},{value:"Module",id:"module",level:3},{value:"Propel",id:"propel",level:3},{value:"Formulaires",id:"formulaires",level:3},{value:"Dispatcher",id:"dispatcher",level:3},{value:"Smarty",id:"smarty",level:3}],d={toc:u};function p(e){let{components:t,...r}=e;return(0,a.kt)("wrapper",(0,n.Z)({},d,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"mettre-\xe0-jour-les-composants"},"Mettre \xe0 jour les composants"),(0,a.kt)("p",null,"Pour mettre \xe0 jour les composants de Thelia, ex\xe9cutez simplement cette commande"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"composer update thelia/thelia-skeleton 2.5.0\n")),(0,a.kt)("h2",{id:"mettre-\xe0-jour-la-base-de-donn\xe9es"},"Mettre \xe0 jour la base de donn\xe9es"),(0,a.kt)("p",null,"Ensuite, vous pouvez mettre \xe0 jour votre base de donn\xe9es avec ce script"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"php local/setup/update.php\n")),(0,a.kt)("h2",{id:"migrer-de-thelia--24-to-25"},"Migrer de Thelia < 2.4 to 2.5"),(0,a.kt)("p",null,"Les modules con\xe7us pour Thelia <= 2.4 ne sont pas compatibles avec la nouvelle version de Thelia, mais il n'y a pas beaucoup de changements \xe0 apporter pour les rendre compatibles"),(0,a.kt)("h3",{id:"module"},"Module"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Certaines m\xe9thodes dans BaseModule ont eu leur type de retour d\xe9fini, car vous les \xe9crasez, vous devez \xe9galement d\xe9finir leur type de retour."),(0,a.kt)("li",{parentName:"ul"},"Si vous souhaitez activer l'autowiring dans votre module, vous devez ajouter cette fonction dans votre classe de base :")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-php"},"public static function configureServices(ServicesConfigurator $servicesConfigurator): void\n{\n    $servicesConfigurator->load(self::getModuleCode().'\\\\', __DIR__)\n        ->exclude([THELIA_MODULE_DIR . ucfirst(self::getModuleCode()). \"/I18n/*\"])\n        ->autowire(true)\n        ->autoconfigure(true);\n}\n")),(0,a.kt)("h3",{id:"propel"},"Propel"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Dans ",(0,a.kt)("inlineCode",{parentName:"li"},"schema.xml")," changer le nom de la base de donn\xe9es de ",(0,a.kt)("inlineCode",{parentName:"li"},"Thelia")," \xe0 ",(0,a.kt)("inlineCode",{parentName:"li"},"TheliaMain")),(0,a.kt)("li",{parentName:"ul"},"Si certains mod\xe8les ont \xe9t\xe9 g\xe9n\xe9r\xe9s par Propel dans ",(0,a.kt)("inlineCode",{parentName:"li"},"Model/Base")," et ",(0,a.kt)("inlineCode",{parentName:"li"},"Model/Map"),", supprimez ces deux dossiers, ils sont maintenant g\xe9n\xe9r\xe9s dans le cache.")),(0,a.kt)("h3",{id:"formulaires"},"Formulaires"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Le nom d'alias du type de formulaire ne fonctionne plus, vous devez utiliser le nom de classe enti\xe8rement qualifi\xe9, comme ",(0,a.kt)("inlineCode",{parentName:"li"},"TextType::class")," au lieu de ",(0,a.kt)("inlineCode",{parentName:"li"},"text")),(0,a.kt)("li",{parentName:"ul"},"Pour le param\xe8tre ",(0,a.kt)("inlineCode",{parentName:"li"},"choices")," dans le type de choix, inversez les ",(0,a.kt)("inlineCode",{parentName:"li"},"label")," et ",(0,a.kt)("inlineCode",{parentName:"li"},"value")),(0,a.kt)("li",{parentName:"ul"},"La m\xe9thode ",(0,a.kt)("inlineCode",{parentName:"li"},"getName()")," doit \xeatre statique"),(0,a.kt)("li",{parentName:"ul"},"Le nom du formulaire ne doit pas contenir de point ",(0,a.kt)("inlineCode",{parentName:"li"},".")," remplacez-le par un underscore ",(0,a.kt)("inlineCode",{parentName:"li"},"_")," (n'oubliez pas de le remplacer dans vos mod\xe8les)"),(0,a.kt)("li",{parentName:"ul"},"La structure des contraintes de rappel a chang\xe9"),(0,a.kt)("li",{parentName:"ul"},"Dans les contr\xf4leurs, n'appelez pas ",(0,a.kt)("inlineCode",{parentName:"li"},"new MyForm();")," pour cr\xe9er votre formulaire mais ",(0,a.kt)("inlineCode",{parentName:"li"},"createForm(FormClassName::getName())"))),(0,a.kt)("h3",{id:"dispatcher"},"Dispatcher"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Les arguments dans la fonction de dispatch sont invers\xe9s, l'",(0,a.kt)("inlineCode",{parentName:"li"},"objet d'\xe9v\xe9nement ")," est le premier argument et le ",(0,a.kt)("inlineCode",{parentName:"li"},"nom de l'\xe9v\xe9nement name")," est le second.")),(0,a.kt)("h3",{id:"smarty"},"Smarty"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Si vous essayez d'acc\xe9der \xe0 une variable non d\xe9finie dans Smarty, cela g\xe9n\xe9rera d\xe9sormais une erreur. Vous devez soit effectuer une v\xe9rification avant de l'utiliser, soit ajouter une valeur par d\xe9faut comme ceci ",(0,a.kt)("inlineCode",{parentName:"li"},"{$var|default:null}"),".")))}p.isMDXComponent=!0}}]);